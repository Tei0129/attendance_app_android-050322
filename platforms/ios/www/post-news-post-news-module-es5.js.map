{"version":3,"sources":["webpack:///src/app/post-news/post-news.module.ts","webpack:///src/app/post-news/post-news.page.html","webpack:///src/app/post-news/post-news.page.ts","webpack:///src/app/post-news/post-news.page.scss","webpack:///src/app/post-news/post-news-routing.module.ts"],"names":["PostNewsPageModule","imports","declarations","env","PostNewsPage","navCtrl","translate","dataProvider","camera","locationSrevice","router","file","geo","mediaCapture","fileUpload","transfer","alertCtrl","DomSanitizer","news","lang","userDetails","formdata","FormData","get","subscribe","res","location_lang","getLocation","getMyLocation","then","resp","console","log","countrycode","country_code","countryCode","showToast","location_error","JSON","parse","localStorage","getItem","user_no","details","user_type","school_id","navigate","news_description","length","max_body","type","mediaType","uploadfile","media","news_posted","safeUrl","usnexpectedError","user_not_exist","create","header","image_option","buttons","text","handler","openCamera","PictureSourceType","CAMERA","gallery","PHOTOLIBRARY","alert","present","video_option","openVideoCamera","openVideoGallery","options","limit","captureVideo","videodata","fullPath","bypassSecurityTrustResourceUrl","mediaKey","error","destinationType","DestinationType","NATIVE_URI","MediaType","VIDEO","sourceType","showLoading","getPicture","videoData","hideLoading","filename","substr","lastIndexOf","dirpath","includes","resolveDirectoryUrl","dirUrl","getFile","retrievedFile","data","nativeURL","quality","imageData","selector","template","routes","path","component","PostNewsPageRoutingModule","forChild","exports"],"mappings":"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","file":"post-news-post-news-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PostNewsPageRoutingModule } from './post-news-routing.module';\n\nimport { PostNewsPage } from './post-news.page';\nimport { PipesModule } from '../pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    PostNewsPageRoutingModule\n  ],\n  declarations: [PostNewsPage]\n})\nexport class PostNewsPageModule {}\n","export default \"<ion-header mode=\\\"md\\\">\\n  <ion-toolbar>\\n   \\t<ion-buttons slot=\\\"end\\\" class=\\\"back-btn\\\">\\n      <!-- <ion-icon name=\\\"arrow-back-outline\\\" (click)=\\\"moveBack()\\\"></ion-icon> -->\\n      <ion-back-button></ion-back-button>\\n   \\t</ion-buttons>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title text-right>{{'post_news.title'| translate}}</ion-title>\\n  </ion-toolbar>\\n\\n</ion-header>\\n<ion-content padding class=\\\"right-direction\\\" mode=\\\"md\\\">\\n  <form #privateMessage='ngForm' class=\\\"fform\\\">\\n    <!-- <div class=\\\"subject\\\">\\n      <ion-item>\\n        <ion-input type=\\\"hidden\\\"  class=\\\"message\\\" placeholder=\\\"{{'post_news.news_title'| translate}}\\\"\\n          [(ngModel)]=\\\"news.title\\\" text-right name=\\\"title\\\" #title='ngModel' required></ion-input>\\n      </ion-item>\\n    </div> -->\\n    <div class=\\\"subject\\\">\\n      <ion-item>\\n        <ion-textarea rows=\\\"10\\\" cols=\\\"20\\\" placeholder=\\\"{{'post_news.news_description'| translate}}\\\"\\n          [(ngModel)]=\\\"news.news_description\\\" text-right name=\\\"msg_body\\\" #msg_body='ngModel' required maxlength=\\\"300\\\">\\n        </ion-textarea>\\n      </ion-item>\\n      <ion-button class=\\\"attachment\\\" icon-only  (click)=\\\"takePicture()\\\">\\n        <ion-icon name=\\\"image-outline\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button class=\\\"attachment-video\\\" icon-only  (click) = \\\"takeVideo()\\\">\\n        <ion-icon name=\\\"videocam-outline\\\"></ion-icon>\\n      </ion-button>\\n    </div>\\n    <div class=\\\"attach-image\\\" *ngIf = \\\"safeUrl && mediaKey == 'image'\\\">\\n      <img src = \\\"assets/imgs/image.png\\\"/>\\n    </div>\\n    <div class=\\\"attach-image\\\" *ngIf = \\\"safeUrl && mediaKey == 'video'\\\">\\n      <video src = \\\"assets/imgs/image\\\" style=\\\"height: 76px;\\\"></video>\\n    </div>\\n  </form>\\n</ion-content>\\n<ion-footer>\\n <ion-button  expand=\\\"full\\\" class=\\\"send-btn\\\" color=\\\"dark\\\"\\n   (click)=\\\"sendNews()\\\">{{'post_news.post'| translate}}</ion-button>\\n    <!-- (click)=\\\"sendMessage()\\\" -->\\n</ion-footer>\";","import { Component, OnInit } from '@angular/core';\nimport { NavController, Platform,AlertController } from '@ionic/angular';\nimport { AuthService } from '../service/auth/auth.service';\nimport { DataService } from '../service/data/data.service';\nimport { FileUploadService } from '../service/file-upload/file-upload.service';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Router} from '@angular/router';\nimport { LocationService } from '../service/location/location.service';\n// import { FileChooser } from '@ionic-native/file-chooser/ngx';\nimport { MediaCapture, MediaFile, CaptureError, CaptureImageOptions,CaptureVideoOptions } from '@ionic-native/media-capture/ngx';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { File, FileEntry } from '@ionic-native/file/ngx';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport {GeoServiceProvider} from '../service/geo-service/geo-service';\nimport { environment } from '../../environments/environment';\nconst env = environment;\n@Component({\n  selector: 'app-post-news',\n  templateUrl: './post-news.page.html',\n  styleUrls: ['./post-news.page.scss'],\n})\nexport class PostNewsPage implements OnInit {\n\tnews={\n\t\t'title':'Title',\n\t\t'news_description':'',\n    'user_no':'',\n    'user_type':'',\n    'type':'',\n    'school_id':'school_id',\n    'countryCode':''\n\t}\n  media:any;\n  mediaName:any;\n  mediaKey:any;\n  mediaType:any;\n  safeUrl:any;\n  lang: any = {};\n  userDetails: any = {};\n  country_code:any;\n  location_lang:any;\n  items:any;\n  videoFileUpload:any;\n  formdata:any=new FormData();\n  /**\n   *\n   * @param navCtrl Navigation controller\n   * @param translate used from translation messages\n   * @param dataProvider data provider\n   * @param camera used for taking images\n   * @param alertCtrl use for alert popup\n   */\n  constructor(public navCtrl: NavController,\n  \t \t\t      public translate: TranslateService,\n              public dataProvider: DataService,\n              public camera: Camera,\n              public locationSrevice:LocationService,\n              private router: Router,\n              private file:File,\n              private geo:GeoServiceProvider,\n              private mediaCapture: MediaCapture, \n              private fileUpload:FileUploadService,\n              // private fileChooser: FileChooser,\n              private transfer: FileTransfer,\n              public alertCtrl: AlertController,\n              private DomSanitizer: DomSanitizer) {\n    this.translate.get(\"alertmessages\").subscribe((res) => {\n      this.lang = res;\n    })\n\n    this.translate.get(\"location\").subscribe((res)=>{\n      this.location_lang = res;\n    })\n    this.getLocation()\n  }\n\n  getLocation(){\n    // this.locationSrevice.checkGPSPermission(resp=>{\n    //   this.country_code=resp.countryCode;\n    //   this.news.countryCode=resp.country_code;\n    // },e=>{\n    //  this.dataProvider.showToast(this.location_lang.location_error);\n    //   console.log(e);\n    // });\n    this.geo.getMyLocation().then(resp=>{\n      console.log(resp.countrycode);\n      if(resp!=''){\n        this.country_code=resp.countryCode;\n          // this.news.countryCode=resp.country_code;\n      }else{\n        this.dataProvider.showToast(this.location_lang.location_error);\n      }\n    })\n  }\n\n\n  /**\n   * Ionic navigation event will run when page is loaded\n   */\n  ionViewWillEnter() {\n    this.userDetails = JSON.parse(localStorage.getItem(\"userloggedin\"));\n   console.log(this.userDetails);\n    this.news.user_no=this.userDetails.details.user_no;\n    this.news.user_type=this.userDetails.details.user_type;\n    this.news.school_id=this.userDetails.details.school_id;\n\n  }\n\n  /**\n   * Used to send the message\n   */\n   moveBack(){\n     this.router.navigate(['tabs/messages']);\n   }\n\n  sendNews(){\n    if(this.userDetails){\n       if(this.news.news_description=='' || this.news.news_description.length>300){\n        this.dataProvider.showToast(this.lang.max_body);\n      }else{\n        this.news.type=this.mediaType;\n            this.fileUpload.uploadfile(this.media,this.news,'postNews',res=>{\n              console.log('resPage',res);\n              if(res){\n                  this.router.navigate(['tabs/news']);\n                  this.dataProvider.showToast(this.lang.news_posted);\n                  this.news={\n                    'title':'title',\n                    'news_description':'',\n                    'user_no':'',\n                    'type':'',\n                    'user_type':'',\n                    'school_id':'',\n                    'countryCode':''\n                  }\n                  this.media = '';\n                  this.safeUrl=false;\n              }else{\n                this.dataProvider.showToast(this.lang.usnexpectedError);\n              }\n            });\n          // this.uploadData(this.media,this.news);\n          // this.startUpload(this.media,this.news);\n      }\n    }else{\n      this.dataProvider.showToast(this.lang.user_not_exist);\n    }\n  }\n\n\n\n  /**\n   * alert to show image take choice\n   */\n async takePicture(){\n  const alert=await this.alertCtrl.create({\n      header: this.lang.image_option,\n      buttons: [\n        {\n          text: this.lang.camera,\n          handler: ()=>{\n            this.openCamera(this.camera.PictureSourceType.CAMERA);\n          }\n        },\n        {\n          text: this.lang.gallery,\n          handler: ()=>{\n            //this.openGallery()\n            this.openCamera(this.camera.PictureSourceType.PHOTOLIBRARY);\n          }\n        }\n      ]\n    })\n  await alert.present();\n  }\n  async takeVideo(){\n  const alert=await this.alertCtrl.create({\n      header: this.lang.video_option,\n      buttons: [\n        {\n          text: this.lang.camera,\n          handler: ()=>{\n            this.openVideoCamera();\n          }\n        },\n        {\n          text: this.lang.gallery,\n          handler: ()=>{\n            this.openVideoGallery()\n          }\n        }\n      ]\n    })\n  await alert.present();\n  }\n\n  openVideoCamera(){\n    let options: CaptureVideoOptions = { limit: 1 };\n    this.mediaCapture.captureVideo(options)\n     .then((videodata)  => {\n       console.log(videodata);\n        this.media=videodata[0].fullPath;\n        this.safeUrl=this.DomSanitizer.bypassSecurityTrustResourceUrl(this.media);\n        this.mediaKey='video',\n        this.mediaType='video/mp4'\n     }).catch(error=>{\n       console.log(error);\n     })\n\n  }\n async openVideoGallery(){\n    let options: CameraOptions = {\n      destinationType: this.camera.DestinationType.NATIVE_URI,\n      mediaType: this.camera.MediaType.VIDEO,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY\n    }\n    this.dataProvider.showLoading();\n    this.camera.getPicture(options).then(async(videoData)=>{\n      this.dataProvider.hideLoading();\n        if(videoData){\n          console.log(videoData);\n            var filename = videoData.substr(videoData.lastIndexOf('/') + 1);\n            var dirpath = videoData.substr(0, videoData.lastIndexOf('/') + 1);\n\n            dirpath = dirpath.includes(\"file://\") ? dirpath : \"file://\" + dirpath;\n\n            try {\n              var dirUrl = await this.file.resolveDirectoryUrl(dirpath);\n              var retrievedFile = await this.file.getFile(dirUrl, filename, {});\n              console.log(dirUrl,retrievedFile);\n\n            } catch(err) {\n\n            }\n            retrievedFile.file( data => {\n                this.media = retrievedFile.nativeURL;\n                this.safeUrl=this.DomSanitizer.bypassSecurityTrustResourceUrl(this.media);\n                this.mediaKey='video',\n                this.mediaType='video/mp4'\n            })\n        }\n    }).catch(()=>this.dataProvider.hideLoading())\n  }\n\n  /**\n   * mobile camera to take image\n   */\n  openCamera(type:any){\n    let options: CameraOptions = {\n       quality: 100,\n      // destinationType: this.camera.DestinationType.NATIVE_URI,\n      // //destinationType: this.camera.DestinationType.DATA_URL,\n      // encodingType: this.camera.EncodingType.PNG,\n      // mediaType: this.camera.MediaType.PICTURE,\n      // allowEdit: true,\n      // correctOrientation: true,\n      sourceType: type\n    }\n    this.dataProvider.showLoading();\n    this.camera.getPicture(options).then((imageData)=>{\n      this.dataProvider.hideLoading();\n      if(imageData){\n        console.log('camera',imageData);\n        this.media=imageData;\n        this.safeUrl=this.DomSanitizer.bypassSecurityTrustResourceUrl(this.media);\n        this.mediaKey='image',\n        this.mediaType='image/png'\n      }\n    }).catch(()=>this.dataProvider.hideLoading())\n  }\n\n\n  ngOnInit() {\n  }\n\n//     startUpload(imgEntry,data) {\n//       this.dataProvider.showLoading();\n//     if(imgEntry){\n//       this.file.resolveLocalFilesystemUrl(imgEntry).then(entry => {\n//               ( < FileEntry > entry).file(file => this.readFile(file,data))\n//           })\n//           .catch(err => {\n//               // this.presentToast('Error while reading file.');\n//           });\n//     }else{\n//       this.uploadDataToServer(data);\n//     }\n// }\n \n// readFile(file: any,data) {\n//   console.log('file',file)\n//     const reader = new FileReader();\n//     reader.onload = () => {\n//         const formData = new FormData();\n//         const imgBlob = new Blob([reader.result], {\n//             type: file.type\n//         });\n//         console.log('imgBlob',imgBlob,file.name);\n//         this.uploadDataToServer(data,imgBlob,file.name)\n//         // formData.append('file', imgBlob, file.name);\n//         // this.uploadImageData(formData);\n//     };\n//     reader.readAsArrayBuffer(file);\n// }\n\n\n//   uploadDataToServer(data,imgBlob?:any,fileName?:any){\n//     console.log(data,imgBlob,fileName);\n//     Object.keys(data).map((key) => {\n//         this.formdata.append(key, data[key]);\n//     })\n//     if(imgBlob){\n//       this.formdata.append('file', imgBlob, fileName);\n//     }\n//     this.fileUpload.uploadByBlob(this.formdata);\n    \n//     // this.dataProvider.addNews(this.formdata,data.school_id).subscribe(res=>{\n//     //   console.log(res);\n//     //     this.dataProvider.hideLoading();\n//     //         this.router.navigate(['tabs/news']);\n//     //         this.dataProvider.showToast(this.lang.news_posted);\n//     //         this.news={\n//     //           'title':'title',\n//     //           'news_description':'',\n//     //           'user_no':'',\n//     //           'type':'',\n//     //           'user_type':'',\n//     //           'school_id':'',\n//     //           'countryCode':''\n//     //         }\n//     //         this.media = '';\n//     //         this.safeUrl=false;\n//     //     },e=>{\n//     //       this.dataProvider.hideLoading();\n//     //        this.dataProvider.showToast(this.lang.usnexpectedError);\n//     //         this.dataProvider.showToast(this.lang.news_posted);\n//     //         this.news={\n//     //           'title':'title',\n//     //           'news_description':'',\n//     //           'user_no':'',\n//     //           'type':'',\n//     //           'user_type':'',\n//     //           'school_id':'',\n//     //           'countryCode':''\n//     //         }\n//     //         this.media = '';\n//     //         this.safeUrl=false;\n//     //        this.router.navigate(['tabs/news']);\n//     //       console.log(\"Error\",e);\n//     //     })\n\n//   }\n\n\n\n//   uploadData(media,formData){\n//         var url = environment.serverURL + 'postNews';\n//         console.log('media',media);\n//         console.log('formData',formData);\n//         console.log('url',url);\n//         var filename='';\n//         if(media){\n//           var name= media.substr(media.lastIndexOf('/') + 1);\n//           var splitted = name.split('?');\n//           filename=splitted[0];\n//         }\n//           this.news.type=this.mediaType;\n//         var options: FileUploadOptions = {\n//           fileName: filename,\n//           fileKey: 'file',\n//           mimeType: this.mediaType,\n//           params: formData,\n//         }\n//         console.log('upload',options);\n//         this.videoFileUpload = this.transfer.create();\n//         this.dataProvider.showLoading();\n//         this.videoFileUpload.upload(media, url, options).then((data) => {\n//             console.log(\"Success\",data);\n\n//             this.dataProvider.hideLoading();\n//             this.router.navigate(['tabs/news']);\n//             this.dataProvider.showToast(this.lang.news_posted);\n//             this.news={\n//                 'title':'title',\n//                 'news_description':'',\n//                 'user_no':'',\n//                 'type':'',\n//                 'user_type':'',\n//                 'school_id':'',\n//                 'countryCode':''\n//               }\n//               this.media = '';\n//               this.safeUrl=false;\n//              // this.router.navigate(['tabs/news']);\n//         })\n//         .catch((err)=>{\n//           this.dataProvider.hideLoading();\n//           this.dataProvider.showToast(err);\n//           console.log(\"Error\",err);\n//         });\n\n//         // this.videoFileUpload.onProgress((data) => {\n//         //   this.uploadPercent = Math.round((data.loaded/data.total) * 100);\n//         // });\n//   }//EOF uploadData\n\n\n\n\n\n}\n","export default \"app-post-news:host .back-btn ion-icon {\\n  font-size: 25px;\\n}\\napp-post-news:host .fform {\\n  margin: 8px;\\n}\\napp-post-news:host .subject {\\n  border: 1px solid grey;\\n  margin: 10px 0;\\n  position: relative;\\n}\\napp-post-news:host ion-row {\\n  text-align: right;\\n}\\napp-post-news:host .send-btn {\\n  height: 60px;\\n}\\napp-post-news:host .checkbox-inner {\\n  position: absolute !important;\\n  left: 8px !important;\\n  height: 14px !important;\\n  top: 0 !important;\\n}\\napp-post-news:host .attachment {\\n  position: absolute;\\n  bottom: 0px;\\n  right: 0px;\\n  --background: unset;\\n  color: black;\\n  float: right;\\n  --box-shadow: unset;\\n  z-index: 2;\\n}\\napp-post-news:host .attachment-video {\\n  position: absolute;\\n  bottom: 0px;\\n  right: 40px;\\n  --background: unset;\\n  color: black;\\n  float: right;\\n  --box-shadow: unset;\\n  z-index: 2;\\n}\\napp-post-news:host .attach-image {\\n  text-align: right;\\n}\\napp-post-news:host .attach-image img {\\n  height: auto;\\n  width: 75px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Bvc3QtbmV3cy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRVE7RUFDSSxlQUFBO0FBRFo7QUFJSTtFQUNJLFdBQUE7QUFGUjtBQUlJO0VBQ0ksc0JBQUE7RUFDQSxjQUFBO0VBQ0Esa0JBQUE7QUFGUjtBQUlJO0VBQ1EsaUJBQUE7QUFGWjtBQUlJO0VBQ0ksWUFBQTtBQUZSO0FBSUk7RUFDSSw2QkFBQTtFQUNBLG9CQUFBO0VBQ0EsdUJBQUE7RUFDQSxpQkFBQTtBQUZSO0FBSUk7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxVQUFBO0VBQ0ksbUJBQUE7RUFDUixZQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0VBQ0ksVUFBQTtBQUZSO0FBSUk7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0VBQ0ksbUJBQUE7RUFDSixZQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0VBQ0ksVUFBQTtBQUZaO0FBSUk7RUFDSSxpQkFBQTtBQUZSO0FBR1E7RUFDSSxZQUFBO0VBQ0EsV0FBQTtBQURaIiwiZmlsZSI6InBvc3QtbmV3cy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJhcHAtcG9zdC1uZXdzOmhvc3Qge1xyXG4gICAgLmJhY2stYnRue1xyXG4gICAgICAgIGlvbi1pY29ue1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDI1cHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLmZmb3Jte1xyXG4gICAgICAgIG1hcmdpbjogOHB4O1xyXG4gICAgfVxyXG4gICAgLnN1YmplY3R7XHJcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgZ3JleTtcclxuICAgICAgICBtYXJnaW46IDEwcHggMDtcclxuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICB9XHJcbiAgICBpb24tcm93e1xyXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgIH1cclxuICAgIC5zZW5kLWJ0bntcclxuICAgICAgICBoZWlnaHQ6IDYwcHg7XHJcbiAgICB9XHJcbiAgICAuY2hlY2tib3gtaW5uZXJ7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgbGVmdDogOHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgaGVpZ2h0OiAxNHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgdG9wOiAwICFpbXBvcnRhbnQ7XHJcbiAgICB9XHJcbiAgICAuYXR0YWNobWVudCB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIGJvdHRvbTogMHB4O1xyXG4gICAgICAgIHJpZ2h0OiAwcHg7XHJcbiAgICAgICAgICAgIC0tYmFja2dyb3VuZDogdW5zZXQ7XHJcbiAgICBjb2xvcjogYmxhY2s7XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbiAgICAtLWJveC1zaGFkb3c6IHVuc2V0O1xyXG4gICAgICAgIHotaW5kZXg6IDI7XHJcbiAgICB9XHJcbiAgICAuYXR0YWNobWVudC12aWRlb3tcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgYm90dG9tOiAwcHg7XHJcbiAgICAgICAgcmlnaHQ6IDQwcHg7XHJcbiAgICAgICAgICAgIC0tYmFja2dyb3VuZDogdW5zZXQ7XHJcbiAgICAgICAgY29sb3I6IGJsYWNrO1xyXG4gICAgICAgIGZsb2F0OiByaWdodDtcclxuICAgICAgICAtLWJveC1zaGFkb3c6IHVuc2V0O1xyXG4gICAgICAgICAgICB6LWluZGV4OiAyO1xyXG4gICAgfVxyXG4gICAgLmF0dGFjaC1pbWFnZXtcclxuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgICAgICBpbWd7XHJcbiAgICAgICAgICAgIGhlaWdodDogYXV0bztcclxuICAgICAgICAgICAgd2lkdGg6IDc1cHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19 */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PostNewsPage } from './post-news.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PostNewsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PostNewsPageRoutingModule {}\n"]}